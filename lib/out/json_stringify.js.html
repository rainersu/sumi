<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: json/stringify.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: json/stringify.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>
define([
	'./json',
	'../misc/classof',
	'../var/hasownproperty',
	'../string/repeat'
], function (J, T, H, R) {

var s,
	p,
	g,
    r,
	i,
	esc = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
	meta = {},
	q = function(str) {
		esc.lastIndex = 0;
		return esc.test(str) ? '"' + str.replace(esc, function(a) {
			var c = meta[a];
			return typeof c === 'string' ? c : '\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
		}) + '"' : '"' + str + '"';
	},
    f = function(key, h) {
		var k, 
			v,
			x,
			l,
			m = g,
			a,
			t,
			val = h[key];
		if(val &amp;&amp; typeof val === 'object' &amp;&amp; typeof val.toJSON === 'function') {
			val = val.toJSON(key);
		}
		if(p === 'function') {
			val = r.call(h, key, val);
		}
		t = T(val);
		switch(t) {
			case 'string' : 
				return q(val);
			case 'number' : 
				return isFinite(val) ? String(val) : 'null';
			case 'boolean':
			case 'null'   : 
				return String(val);
			default       :
				if (!val) {
					return 'null';
				}
				g += i;
				a = [];
				if(t === 'array') {
					l = val.length;
					for(x = 0; x &lt; l; x++) {
						a[x] = f(x, val) || 'null';
					}
					v = a.length === 0 ? '[]' : g ? '[\n' + g + a.join(',\n' + g) + '\n' + m + ']' : '[' + a.join(',') + ']';
					g = m;
					return v;
				}
				if(p === 'array') {
					l = r.length;
					for(x = 0; x &lt; l; x++) {
						if(T(r[x]) === 'string') {
							k = r[x];
							v = f(k, val);
							if(v) {
								a.push(q(k) + (g ? ': ' : ':') + v);
							}
						}
					}
				}
				else {
					for(k in val) {
						if(H(val, k)) {
							v = f(k, val);
							if(v) {
								a.push(q(k) + (g ? ': ' : ':') + v);
							}
						}
					}
				}
				v = a.length === 0 ? '{}' : g ? '{\n' + g + a.join(',\n' + g) + '\n' + m + '}' : '{' + a.join(',') + '}';
				g = m;
				return v;
		}
	};

meta['\b']='\\b';
meta['\t']='\\t';
meta['\n']='\\n';
meta['\f']='\\f';
meta['\r']='\\r';
meta['"' ]='\\"';
meta['\\']='\\\\';


X(J, {
	stringify: function(value, replacer, space) {
		s = space;
		p = T(s);
		g = '';
		i = p === 'number' ? ' '.R(s >>> 0) : p === 'string' ? s : '';
		r = replacer;
		p = T(r);
		return f('', {
			'': value
		});
	}
});

});

/**
* 将一个 JavaScript 对象字符串化为 JSON 字符串。
* @see {@link Date#toJSON}
* @see {@link Number#toJSON}
* @see {@link Boolean#toJSON}
* @see {@link String#toJSON}
* @access public
* @func JSON.stringify
* @param {object} value - 将要转为JSON字符串的javascript对象
* @param {(function|number[]|string[])} [replacer] - 用于过滤筛选的函数或白名单数组
* @param {(string|number)} [space] - 插入用于增强可读性的指定空白字符串或指定数目的空格
* @returns {string}
* @example
* console.log(JSON.stringify({
*     l: '"\b\t\n\f\r"\\',
*     o: '',
*     p: null,
*     q: undefined,
*     r: Math,
*     s: .33,
*     t: /\d+/,
*     x: 1,
*     y: new Date(1972, 3, 8),
*     z: [2, 3],
*     u: {},
*     v: [],
*     w: function() {}
* }));  // {"l":"\"\b\t\n\f\r\"\\","o":"","p":null,"r":{},"s":0.33,"t":{},"x":1,"y":"1972-04-07T16:00:00.000Z","z":[2,3],"u":{},"v":[]}
*/	
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Externals</h3><ul><li><a href="external-Array.html">Array</a></li><li><a href="external-Date.html">Date</a></li><li><a href="external-Error.html">Error</a></li><li><a href="external-Function.html">Function</a></li><li><a href="external-Math.html">Math</a></li><li><a href="external-Number.html">Number</a></li><li><a href="external-Object.html">Object</a></li><li><a href="external-RegExp.html">RegExp</a></li><li><a href="external-String.html">String</a></li></ul><h3>Namespaces</h3><ul><li><a href="crypto.html">crypto</a></li><li><a href="uuid.html">uuid</a></li></ul><h3>Global</h3><ul><li><a href="global.html#classof">classof</a></li><li><a href="global.html#foreach">foreach</a></li><li><a href="global.html#xcopy">xcopy</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha10</a> on Sun Jan 25 2015 02:25:39 GMT+0800 (CST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
