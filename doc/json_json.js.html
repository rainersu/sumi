<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: json/json.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: json/json.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>
define(
[
	'../var/global',
	'../var/hasOP',
	'../core/type'
]
, function (
	global, 
	hasOP, 
	type
) 
{'use strict';

if (global.JSON) return global.JSON;

var cx,
    escapable,
    gap,
    indent,
    meta,
    rep;

function quote (s) {
    escapable.lastIndex = 0;
    return escapable.test(s) ? '"' + s.replace(escapable, function (a) {
        var c = meta[a];
        return typeof c === 'string' ? c : '\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
    }) + '"' : '"' + s + '"';
}

function str (key, holder) {
    var i,          
        k,          
        v,          
        length,
        mind = gap,
        partial,
        value = holder[key];
    if (value &amp;&amp; typeof value === 'object' &amp;&amp; typeof value.toJSON === 'function') {
        value = value.toJSON(key);
    }
    if (typeof rep === 'function') {
        value = rep.call(holder, key, value);
    }
    switch (typeof value) {
    case 'string':
        return quote(value);
    case 'number':
        return isFinite(value) ? String(value) : 'null';
    case 'boolean':
    case 'null':
        return String(value);
    case 'object':
        if (!value) {
            return 'null';
        }
        gap += indent;
        partial = [];
        if (Object.prototype.toString.apply(value) === '[object Array]') {
            length = value.length;
            for (i = 0; i &lt; length; i += 1) {
                partial[i] = str(i, value) || 'null';
            }
            v = partial.length === 0
                ? '[]'
                : gap
                ? '[\n' + gap + partial.join(',\n' + gap) + '\n' + mind + ']'
                : '[' + partial.join(',') + ']';
            gap = mind;
            return v;
        }
        if (rep &amp;&amp; typeof rep === 'object') {
            length = rep.length;
            for (i = 0; i &lt; length; i += 1) {
                if (typeof rep[i] === 'string') {
                    k = rep[i];
                    v = str(k, value);
                    if (v) {
                        partial.push(quote(k) + (gap ? ': ' : ':') + v);
                    }
                }
            }
        } else {
            for (k in value) {
                if (hasOP.call(value, k)) {
                    v = str(k, value);
                    if (v) {
                        partial.push(quote(k) + (gap ? ': ' : ':') + v);
                    }
                }
            }
        }
        v = partial.length === 0
            ? '{}'
            : gap
            ? '{\n' + gap + partial.join(',\n' + gap) + '\n' + mind + '}'
            : '{' + partial.join(',') + '}';
        gap = mind;
        return v;
    }
}

escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;
meta = {};
meta['\b'] =  '\\b';
meta['\t'] =  '\\t';
meta['\n'] =  '\\n';
meta['\f'] =  '\\f';
meta['\r'] =  '\\r';
meta['"' ] =  '\\"';
meta['\\'] = '\\\\';
cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;

return global.JSON = {
	stringify : function (value, replacer, space) {
    var i;
    gap = '';
    indent = '';
    if (typeof space === 'number') {
        for (i = 0; i &lt; space; i += 1) {
            indent += ' ';
        }
    } 
	else if (typeof space === 'string') {
        indent = space;
    }
    rep = replacer;
    if (replacer &amp;&amp; typeof replacer !== 'function' &amp;&amp; (typeof replacer !== 'object' || typeof replacer.length !== 'number')) {
        throw new Error('JSON.stringify');
    }
    return str('', {'': value});
},
	parse     : function (text, reviver) {
	    var j;
	    function walk(holder, key) {
	        var k, v, value = holder[key];
	        if (value &amp;&amp; typeof value === 'object') {
	            for (k in value) {
	                if (hasOP.call(value, k)) {
	                    v = walk(value, k);
	                    if (v !== undefined) {
	                        value[k] = v;
	                    } else {
	                        delete value[k];
	                    }
	                }
	            }
	        }
	        return reviver.call(holder, key, value);
	    }
	    text = String(text);
	    cx.lastIndex = 0;
	    if (cx.test(text)) {
	        text = text.replace(cx, function (a) {
	            return '\\u' +
	                ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
	        });
	    }
	    if (/^[\],:{}\s]*$/
	            .test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@')
	                .replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, ']')
	                .replace(/(?:^|:|,)(?:\s*\[)+/g, ''))) {
	        j = eval('(' + text + ')');
	        return typeof reviver === 'function' ? walk({'': j}, '') : j;
	    }
	    throw new SyntaxError('JSON.parse');
	}
};

});

/**
* @external JSON
* @see {@link http://www.json.org/}
* @see {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON}
* @see {@link https://msdn.microsoft.com/en-us/library/ie/cc836458(v=vs.94).aspx}
* @see {@link https://github.com/douglascrockford/JSON-js}
*/

/**
* ECMAScript 5.1 Standard &lt;br>
* 将一个 JSON 字符串转换为一个 JavaScript 值。
* @access public
* @func external:JSON.parse
* @param {string} text - JSON 字符串
* @param {function} [reviver] - 用于选择性的篡改某些解析出的属性值
* @returns {*}
* @example
* console.log(JSON.parse('{}'));                // {}
* console.log(JSON.parse('true'));              // true
* console.log(JSON.parse('"foo"'));             // "foo"
* console.log(JSON.parse('[1, 5, "false"]'));   // [1, 5, "false"]
* console.log(JSON.parse('null'));              // null
* console.log(JSON.parse('{"1": 1, "2": 2}'));  // Object {1: 1, 2: 2}
*/
	
/**
* ECMAScript 5.1 Standard &lt;br>
* 将一个 JavaScript 对象字符串化为 JSON 字符串。
* @see {@link external:Date#toJSON}
* @see {@link external:Number#toJSON}
* @see {@link external:Boolean#toJSON}
* @see {@link external:String#toJSON}
* @access public
* @func external:JSON.stringify
* @param {object} value - 将要转为JSON字符串的javascript对象
* @param {(function|number[]|string[])} [replacer] - 用于过滤筛选的函数或白名单数组
* @param {(string|number)} [space] - 插入用于增强可读性的指定空白字符串或指定数目的空格
* @returns {string}
* @example
* var x = {
*     l: '"\b\t\n\f\r"\\',
*     o: '',
*     p: null,
*     q: undefined,
*     s: .33,
*     t: /\d+/,
*     x: 1,
*     y: new Date(1972, 3, 8),
*     z: [2, 3],
*     u: {},
*     v: [],
*     w: function() {}
* };
* var s = '{"l":"\\"\\b\\t\\n\\f\\r\\"\\\\","o":"","p":null,"s":0.33,"t":{},"x":1,"y":"1972-04-07T16:00:00.000Z","z":[2,3],"u":{},"v":[]}';
* var m = JSON.stringify(x);
* 
* console.log(m);
* //'{"l":"\\"\\b\\t\\n\\f\\r\\"\\\\","o":"","p":null,"s":0.33,"t":{},"x":1,"y":"1972-04-07T16:00:00.000Z","z":[2,3],"u":{},"v":[]}'
* 
* console.log(m === s);      // true
*/
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Externals</h3><ul><li><a href="external-Array.html">Array</a></li><li><a href="external-Boolean.html">Boolean</a></li><li><a href="external-Date.html">Date</a></li><li><a href="external-Error.html">Error</a></li><li><a href="external-Function.html">Function</a></li><li><a href="external-JSON.html">JSON</a></li><li><a href="external-Math.html">Math</a></li><li><a href="external-Number.html">Number</a></li><li><a href="external-Object.html">Object</a></li><li><a href="external-RegExp.html">RegExp</a></li><li><a href="external-String.html">String</a></li></ul><h3>Classes</h3><ul><li><a href="Sumi.Class.html">Class</a></li></ul><h3>Namespaces</h3><ul><li><a href="Sumi.html">Sumi</a></li><li><a href="Sumi.Array.html">Array</a></li><li><a href="Sumi.Boolean.html">Boolean</a></li><li><a href="Sumi.Core.html">Core</a></li><li><a href="Sumi.Crypto.html">Crypto</a></li><li><a href="Sumi.Date.html">Date</a></li><li><a href="Sumi.Error.html">Error</a></li><li><a href="Sumi.Escape.html">Escape</a></li><li><a href="Sumi.Function.html">Function</a></li><li><a href="Sumi.Math.html">Math</a></li><li><a href="Sumi.Number.html">Number</a></li><li><a href="Sumi.Object.html">Object</a></li><li><a href="Sumi.RegExp.html">RegExp</a></li><li><a href="Sumi.String.html">String</a></li><li><a href="Sumi.UUID.html">UUID</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha10</a> on Tue Feb 10 2015 11:41:41 GMT+0800 (CST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
